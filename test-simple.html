<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简单搜索测试</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-area { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>🔍 简单搜索功能测试</h1>
    
    <div class="test-area">
        <h2>测试搜索按钮</h2>
        <p>点击下面的按钮测试展开/收起功能：</p>
        <div id="search-container"></div>
    </div>

    <script>
        // 模拟搜索结果
        const mockResults = [
            { title: "测试文章1", url: "https://example.com/1", snippet: "这是测试文章1的摘要内容..." },
            { title: "测试文章2", url: "https://example.com/2", snippet: "这是测试文章2的摘要内容..." },
            { title: "测试文章3", url: "https://example.com/3", snippet: "这是测试文章3的摘要内容..." }
        ];

        // 生成搜索HTML
        function createSearchHTML() {
            const uniqueId = 'test-search-' + Date.now();
            return `
                <div class="search-sources-container">
                    <button class="search-sources-toggle" onclick="toggleSearchSources('${uniqueId}')">
                        <span>🔍</span>
                        <span>搜索了 3 篇网页</span>
                        <span class="chevron">▼</span>
                    </button>
                    <div class="search-sources-panel" id="${uniqueId}" style="display: none;">
                        <div class="search-sources-header">参考资料 (3)</div>
                        <div class="search-sources-list">
                            ${mockResults.map((result, i) => `
                                <div class="search-source-item">
                                    <div class="source-number">${i + 1}</div>
                                    <div class="source-content">
                                        <div class="source-title">${result.title}</div>
                                        <div class="source-snippet">${result.snippet}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // 切换函数
        window.toggleSearchSources = function(id) {
            console.log('点击按钮，ID:', id);
            const panel = document.getElementById(id);
            if (!panel) {
                console.error('找不到面板:', id);
                return;
            }
            
            const isHidden = panel.style.display === 'none' || panel.style.display === '';
            panel.style.display = isHidden ? 'block' : 'none';
            console.log(isHidden ? '展开' : '收起');
        }

        // 初始化
        document.getElementById('search-container').innerHTML = createSearchHTML();
    </script>

    <!-- 引入样式 -->
    <link rel="stylesheet" href="src/css/styles.css">
</body>
</html>
